<!DOCTYPE html>
<html>
	<head>
		<script src="lib/jquery.min.js"></script>
		<link href="css/bootstrap.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="css/stock-check.css">
		<script src="lib/bootstrap.min.js"></script>
		<script src="lib/alasql.min.js"></script>
		<script src="lib/purl.js"></script>
		<script src="js/db.js"></script>
		<meta charset="utf-8">
		<meta http-equiv="Pragma" content="no-cache">
		<meta http-equiv="Cache-Control" content="no-cache">
		<meta name="viewport" content="width=device-width">
		<title>COMPANY</title>
	</head>
	<body>
		<div class="sitename">
		  <div class="container">
		    <a href="index.html">COMPANY&nbsp;在庫管理</a>
		  </div>
		</div>
		<nav class="navbar navbar-default">
			<div class="container">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="navbar-collapse">
					<ul class="nav navbar-nav">
						<li><a href="index.html" class="index_css">在庫情報&nbsp;portal</a></li>
						<li><a href="index-stock-check.html" class="stock-check_css">在庫状況分析</a></li>
						<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">発注・入庫&nbsp;<span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu">
								<li><a href="index-in.html" class="index-in_css">[商品別]&nbsp;進捗管理・データ登録</a></li>
								<li><a href="index-in-all.html" class="index-in-all_css">[受注案件別]&nbsp;進捗管理</a></li>
							</ul>
						</li>
						<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">受注・出庫&nbsp;<span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu">
								<li><a href="index-out.html" class="index-out_css">[商品別]&nbsp;進捗管理・データ登録</a></li>
								<li><a href="index-out-all.html" class="index-out-all_css">[受注案件別]&nbsp;進捗管理</a></li>
							</ul>
						</li>
						<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">返品・棚卸&nbsp;<span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu">
								<li><a href="index-return.html" class="index-return_css">返品データ&nbsp;登録</a></li>
								<li><a href="index-inventory.html" class="index-inventory_css">棚卸データ&nbsp;登録</a></li>
							</ul>
						</li>
						<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">メンテナンス&nbsp;<span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu">
								<li><a href="index-item-info.html" class="index-item-info_css">商品データ</a></li>
								<li><a href="index-whouse-info.html" class="index-whouse-info_css">倉庫データ</a></li>
								<li><a href="index-kind-info.html" class="index-kind-info_css">商品区分データ</a></li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">システム <span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li>
									<a onclick="window.location.reload(true);"><span class="glyphicon glyphicon-refresh"></span> リロード</a>
								</li>
								<li>
									<a onclick="DB.init();"><span class="glyphicon glyphicon-repeat"></span> DB初期化</a>
								</li>
								<li role="separator" class="divider"></li>
								<li>
									<a onclick="DB.remove();"><span class="glyphicon glyphicon-trash"></span> DB削除</a>
								</li>
							</ul>
						</li>
					</ul>
				</div><!-- /.navbar-collapse -->
			</div><!-- /.container-fluid -->
		</nav>

		<div class="container">
			<div><!-- パンくずリスト -->
				<ol class="breadcrumb">
					<li><a href="index.html">在庫情報&nbsp;portal</a></li>
					<li><a href="index-stock-check.html">在庫状況分析</a></li>
					<li class="active" id="this_bread"></li>
				</ol>
			</div>
		

			<div class="panel panel-default">
				<div class="panel-heading">安全在庫数 設定条件</div>
				<table class="table table-hover">
					<tbody>
						<tr>
							<th>リードタイム</th><td id="leadtime"></td>
						</tr>
						<tr>
							<th>許容欠品率</th><td id="lack"></td>
						</tr>
						<tr>
							<th>標準偏差(直近3ヶ月出荷実績)</th><td id="hensa"></td>
						</tr>
					</tbody>
				</table>
			</div>	

<!-- 適正在庫数 -->
			<div class="panel panel-default" id="just_stock">
				<div class="panel-heading">適正在庫数</div>
					<div id="just_stock_data"></div>
			</div>

<!-- 現在の在庫数 -->
			<div class="panel panel-default" id="current_stock">
				<div class="panel-heading">現在の在庫数</div>
					<div id="current_stock_data"></div>
			</div>

<!-- 回帰分析 -->
			<div class="panel panel-default" id="analysis">
				<div class="panel-heading" id="ana_title">販売予測データ</div>
				<table id="analysis_table">
					<thead>
						<tr>
							<th>月</th>
							<th>1</th>
							<th>2</th>
							<th>3</th>
							<th>4</th>
							<th>5</th>
							<th>6</th>
							<th>7</th>
							<th>8</th>
							<th>9</th>
							<th>10</th>
							<th>11</th>
							<th>12</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>季節係数</th>
							<td id="season1">*</td>
							<td id="season2">*</td>
							<td id="season3">*</td>
							<td id="season4">*</td>
							<td id="season5">*</td>
							<td id="season6">*</td>
							<td id="season7">*</td>
							<td id="season8">*</td>
							<td id="season9">*</td>
							<td id="season10">*</td>
							<td id="season11">*</td>
							<td id="season12">*</td>
						</tr>
						<tr>
							<th id="last3_year"></th><!-- 3年前 -->
							<td id="last3_year_m1">*</td>
							<td id="last3_year_m2">*</td>
							<td id="last3_year_m3">*</td>
							<td id="last3_year_m4">*</td>
							<td id="last3_year_m5">*</td>
							<td id="last3_year_m6">*</td>
							<td id="last3_year_m7">*</td>
							<td id="last3_year_m8">*</td>
							<td id="last3_year_m9">*</td>
							<td id="last3_year_m10">*</td>
							<td id="last3_year_m11">*</td>
							<td id="last3_year_m12">*</td>
						</tr>				
						<tr>
							<th id="last2_year"></th><!-- 2年前 -->
							<td id="last2_year_m1">*</td>
							<td id="last2_year_m2">*</td>
							<td id="last2_year_m3">*</td>
							<td id="last2_year_m4">*</td>
							<td id="last2_year_m5">*</td>
							<td id="last2_year_m6">*</td>
							<td id="last2_year_m7">*</td>
							<td id="last2_year_m8">*</td>
							<td id="last2_year_m9">*</td>
							<td id="last2_year_m10">*</td>
							<td id="last2_year_m11">*</td>
							<td id="last2_year_m12">*</td>
						</tr>
						<tr>
							<th id="last1_year"></th><!-- 1年前 -->
							<td id="last1_year_m1">*</td>
							<td id="last1_year_m2">*</td>
							<td id="last1_year_m3">*</td>
							<td id="last1_year_m4">*</td>
							<td id="last1_year_m5">*</td>
							<td id="last1_year_m6">*</td>
							<td id="last1_year_m7">*</td>
							<td id="last1_year_m8">*</td>
							<td id="last1_year_m9">*</td>
							<td id="last1_year_m10">*</td>
							<td id="last1_year_m11">*</td>
							<td id="last1_year_m12">*</td>
						</tr>	
						<tr>
							<th id="this_year"></th><!-- 今年分 -->
							<td id="this_year_m1">*</td>
							<td id="this_year_m2">*</td>
							<td id="this_year_m3">*</td>
							<td id="this_year_m4">*</td>
							<td id="this_year_m5">*</td>
							<td id="this_year_m6">*</td>
							<td id="this_year_m7">*</td>
							<td id="this_year_m8">*</td>
							<td id="this_year_m9">*</td>
							<td id="this_year_m10">*</td>
							<td id="this_year_m11">*</td>
							<td id="this_year_m12">*</td>
						</tr>	
						<tr>
							<th id="next_year"></th><!-- 来年分 -->
							<td id="next_year_m1">*</td>
							<td id="next_year_m2">*</td>
							<td id="next_year_m3">*</td>
							<td id="next_year_m4">*</td>
							<td id="next_year_m5">*</td>
							<td id="next_year_m6">*</td>
							<td id="next_year_m7">*</td>
							<td id="next_year_m8">*</td>
							<td id="next_year_m9">*</td>
							<td id="next_year_m10">*</td>
							<td id="next_year_m11">*</td>
							<td id="next_year_m12">*</td>
						</tr>	
				
					
					</tbody>
				
				</table>
			</div>

<!-- ここから未編集 -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>
<?xml version="1.0" encoding="shift_jis"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="ja" xmlns="http://www.w3.org/1999/xhtml">

<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
 <meta name="GENERATOR" content="notepad 6.0 for Windows">
 <meta http-equiv="Content-Style-Type" content="text/css">
 <link rel="shortcut icon" href="favicon.ico">


 <script type="text/javascript" src="corp.js"></script>

 <title>相関係数と回帰直線（JavaScript版）</title>
</head>

<body onLoad="loadCanvas()">
<h2>
■相関係数と回帰直線（JavaScript版）</h2>
<blockquote>
　<strong>相関係数</strong>：R（correlation coefficient）は２つの変数間の相関すなわち類似性を示す指標で、－１から＋１までの値です。　この値が正のときは「正の相関」、負のときは「負の相関」があると呼びます。　相関係数が０に近いときは２つの変数間の相関は弱いことになります。<br><br>

　両者の関係を直線で近似したものを<strong>回帰直線</strong>と呼び、<br>
　　・xからyへの回帰直線：　y = a1*x + b1<br>
　　・yからxへの回帰直線：　x = a2*y + b2<br>
があります。<br>
　両回帰直線はともに平均点（xm, ym）を通ります。<br><br>

　２変数間の相関の程度を表すもう１つの指標に<strong>決定係数</strong>：R2があります。<br>
　　R2 = 1 - 残差２乗和/被説明変数の全変動<br>
　　　　= 1 - Σ[yi - (a1・xi + b1)]<sup>2</sup>/Σ(yi - ym)<sup>2</sup>　（xからyへの回帰直線の場合）<br><br>

　相関係数：Rと決定係数：R2の間には、<br>
　　R2 = R x R<br>
の関係があります（後述）。<br><br>

　下の画面にデータを打ち込んで下さい。相関係数、決定係数、回帰直線が表示されます。<br>

<hr size="3">

<form name="form1">
<table>
<tr><td>ﾃﾞｰﾀ数 n：</td>
    <td>相関係数 R：</td>
    <td>決定係数 R2：</td>
    <td><input type="button" value="全 ﾃﾞｰﾀｸﾘｱ" onClick="clearD(0)"></td>
</tr>

<tr><td><input type="text" name="tfN" value=""></td>
    <td><input type="text" name="tfCC" value=""></td>
    <td><input type="text" name="tfR2" value=""></td>
    <td><input type="button" value="直前ﾃﾞｰﾀｸﾘｱ" onClick="clearD(1)"></td>
</tr>
</table>

<hr size="3">

<canvas width="500" height="500" id="canvas" style="border: 1px solid green;"></canvas>
</form>
<br>

<strong>●相関係数：R および回帰直線の計算式</strong><br>
<pre>
・データを(x1,y1), (x2,y2), .., (xn,yn) とする。
・平均
　　xm = Σxi/n
　　ym = Σyi/n
・分散、標準偏差
　　xの標準偏差 sx = sqrt[Σ(xi-xm)<sup>2</sup>/n]　　<span id="idc">（注）sqrt: 平方根を表す</span>
　　yの標準偏差 sy = sqrt[Σ(yi-ym)<sup>2</sup>/n]
　　x,yの共分散 sxy = Σ(xi-xm)(yi-ym)/n
・相関係数：R
　　R = sxy/(sx・sy)
・xからyへの回帰直線：　y = a1*x + b1
　　a1 = sxy/sx<sup>2</sup>
　　b1 = ym - a1・xm
・yからxへの回帰直線：　x = a2*y + b2 [ -> y = (1/a2)x - (b2/a2) ]
　　a2 = sxy/sy<sup>2</sup>
　　b2 = xm - a2・ym
</pre><br>

<strong>●相関係数：R と 決定係数：R2 の関係</strong><br>
<span id ="idc">
　xからyへの回帰直線の場合について記すが、yからxへの回帰直線でも同じ結果となる。<br>
</span>
<pre>
・残差２乗和（RSS：Residual Sum of Squares）
　　RSS = Σ[yi- (a1・xi+b1)]<sup>2</sup>
　　    = Σ[yi- (sxy/sx<sup>2</sup>・xi + ym - sxy/sx<sup>2</sup>・xm)]<sup>2</sup>
　　    = Σ[(yi-ym) - sxy/sx<sup>2</sup>・(xi-xm)]<sup>2</sup>
　　    = Σ(yi-ym)<sup>2</sup> - 2・sxy/sx<sup>2</sup>Σ(xi-xm)(yi-ym) + (sxy/sx<sup>2</sup>)<sup>2</sup>Σ(xi-xm)<sup>2</sup>
　　　　= n・ sy<sup>2</sup> - 2・n・(sxy/sx)<sup>2</sup> + n・(sxy/sx)<sup>2</sup> 
　　　　= n・ sy<sup>2</sup> - n・(sxy/sx)<sup>2</sup>
・被説明変数（従属変数 y）の全変動
　　DY2 = Σ(yi-ym)<sup>2</sup>
　　    = n・ sy<sup>2</sup>
・決定係数：R2
　　R2 = 1 - RSS/DY2
　　   = 1 - [n・ sy<sup>2</sup> - n・(sxy/sx)<sup>2</sup>] / [n・ sy<sup>2</sup>]
　　   = n・(sxy/sx)<sup>2</sup>] / [n・ sy<sup>2</sup>]
　　   =(sxy/sx)<sup>2</sup>] / sy<sup>2</sup>
　　   =[sxy/(sx・sy)]<sup>2</sup>
　　   =R<sup>2</sup>
</pre>
</blockquote>

<a href="http://www.enjoy.ne.jp/~k-ichikawa/index.html">ホーム</a>
</body>
</html>
</body>
</html>



		</div>
		<script src="js/stock-check.js"></script>
	</body>
</html>